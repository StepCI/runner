version: '1.1'
name: JSONata test
tests:
  example:
    steps:
      - name: JSONata evaluation test
        http:
          url: https://httpbin.org/ip
          method: GET
          check:
            status: 200
            jsonata:
              formatcheck: |
                $match(origin, /(\d{1,3}\.){3}\d{1,3}/)
      - name: JSONata return object sample
        http:
          url: https://jsonplaceholder.typicode.com/posts/
          method: GET
          check:
            jsonata:
              notmatch: |
                (
                  $a := 99;
                  $b := $count($);
                  { "expected": $a, "given": $b, "passed": ($a = $b) }
                )
